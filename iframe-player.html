<html>
<head>
  <style>
    input {
      font-size: 16px; 
      width: 100%; 
      padding: 15px;
      background-color: #d7e8e8; 
    }
    
    body{
      padding: 10px;
    }
    
    label{
       margin: 10px 0;
      display: block;
      font-weight: bold;
    }
    
    .input-container{
      margin: 10px 0;
      display: flex;
    }
    
    #btnParseUrl{
      height: 52px; 
      margin-right: 10px; 
      align-self: flex-end;
    }
  </style>   
</head> 
<body>

<div class="input-container">
    <button id="btnParseUrl" 
            onclick="parseYoutubeVideoUrl()">
      Parse Video Code
    </button>
    <div style="width: 100%;">
        <label>
            Youtube video Url (ex. "https://www.youtube.com/embed/someThing")
        </label>
        <input id="txtUrl" 
               type="text" 
               value="https://www.youtube.com/embed" 
               onchange="setSource();" 
               ondblclick="selectText()"
        >
     </div>
  </div>
    
<iframe 
  id="player"
  width="100%" 
  height="90%"
  src="https://www.youtube.com/embed" 
  frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen></iframe>

<script>
  const txtUrl = document.querySelector('#txtUrl');  
  const iframe = document.querySelector('#player');    
  const btnParseUrl = document.querySelector('#txtUrl'); 
  
  function selectText(){
    txtUrl.select()
  }
  
  function setSource(){
    const source = txtUrl.value.trim();
    iframe.setAttribute('src', source);
  }
  
  function parseYoutubeVideoUrl(){
    const url = txtUrl.value.trim();
    const parsedUrl = getYoutubeVideoCode(url);    
    const template = 'https://www.youtube.com/embed/';
    const source =  template + parsedUrl;
    
    if(!source){
      alert(`The url: ${url} cannot be parsed :( `);
    }
    else{
      txtUrl.value = source;
      iframe.setAttribute('src', source);
    }   
  }

  function getYoutubeVideoCode(url){
    const REGEX = /(?<=watch\?v=).*(?=&)/;
    const matches =  url.match(REGEX);
    const videoCode = matches.length > 0 ? matches[0] : null; 
    
    return videoCode;
  }  
  
</script>
</body>

</html>
